<?xml version="1.0" encoding="UTF-8" ?>
<!--
  ~ #{copyright}#
  -->

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="hpms.bs.mapper.ConfigValuesMapper">
    <resultMap id="BaseResultMap" type="hpms.bs.dto.ConfigValue" extends="com.hand.hap.mapper.StdMapper.STD">
        <id column="config_value_id" property="configValueId" jdbcType="DECIMAL" />
        <result column="config_id" property="configId" jdbcType="DECIMAL" />
        <result column="config_value_number" property="configValueNumber" jdbcType="VARCHAR" />
        <result column="config_value_name" property="configValueName" jdbcType="VARCHAR" />
        <result column="company_id" property="companyId" jdbcType="DECIMAL" />
        <result column="enable_flag" property="enableFlag" jdbcType="VARCHAR" />


    </resultMap>

    <!--校验编码的唯一性-->
    <select id="findUnique" resultMap="BaseResultMap" parameterType="hpms.bs.dto.ConfigValue">
         SELECT hcv.config_value_id,
                hcv.config_value_number
    FROM hpms_config_value hcv

        <where>
            1=1
            <if test="configValueId!=null">
                and hcv.config_value_id != #{configValueId,jdbcType=DECIMAL}
            </if>

            <if test="configValueNumber!=null">
                and  hcv.config_value_number =#{configValueNumber,jdbcType=VARCHAR}
            </if>

            <if test="configId!=null">
                and hcv.config_id=#{configId,jdbcType=DECIMAL}
            </if>
        </where>
    </select>

</mapper>